{"version":3,"file":"pages/result/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;;;;;;;;;;;;;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://mbti-test-mini/./src/pages/result/index.tsx?2280","webpack://mbti-test-mini/._src_pages_result_index.tsx","webpack://mbti-test-mini/._src_utils_bizUtils.ts","webpack://mbti-test-mini/._node_modules_@babel_runtime_helpers_esm_createForOfIteratorHelper.js"],"sourcesContent":["import { View, Image } from \"@tarojs/components\";\nimport { AtButton } from \"taro-ui\";\nimport Taro from \"@tarojs/taro\";\nimport headerBg from \"../../assets/headerBg.jpg\";\nimport GlobalFooter from \"../../components/GlobalFooter\";\nimport { getBestQuestionResult } from \"../../utils/bizUtils\";\nimport questions from \"../../data/questions.json\";\nimport questionResults from \"../../data/question_results.json\";\nimport \"./index.scss\";\n\n/**\n * 测试结果页面\n * @author <a href=\"https://github.com/liyupi\">程序员鱼皮</a>\n * @from <a href=\"https://www.code-nav.cn\">编程导航学习圈</a>\n */\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default (function () {\n  // 获取答案\n  var answerList = Taro.getStorageSync(\"answerList\");\n  if (!answerList || answerList.length < 1) {\n    Taro.showToast({\n      title: \"答案为空\",\n      icon: \"error\",\n      duration: 3000\n    });\n  }\n  // 获取测试结果\n  var result = getBestQuestionResult(answerList, questions, questionResults);\n  return /*#__PURE__*/_jsxs(View, {\n    className: \"resultPage\",\n    children: [/*#__PURE__*/_jsx(View, {\n      className: \"at-article__h1 title\",\n      children: result.resultName\n    }), /*#__PURE__*/_jsx(View, {\n      className: \"at-article__h2 subTitle\",\n      children: result.resultDesc\n    }), /*#__PURE__*/_jsx(AtButton, {\n      type: \"primary\",\n      circle: true,\n      className: \"enterBtn\",\n      onClick: function onClick() {\n        Taro.reLaunch({\n          url: \"/pages/index/index\"\n        });\n      },\n      children: \"\\u8FD4\\u56DE\\u4E3B\\u9875\"\n    }), /*#__PURE__*/_jsx(Image, {\n      className: \"headerBg\",\n      src: headerBg\n    }), /*#__PURE__*/_jsx(GlobalFooter, {})]\n  });\n});","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/result/index!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"查看结果\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/result/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n","/**\r\n * 获取最佳题目评分结果\r\n * @param answerList\r\n * @param questions\r\n * @param question_results\r\n */\r\n\r\nexport function getBestQuestionResult(answerList, questions, question_results) {\r\n  // 初始化一个对象，用于存储每个选项的计数\r\n  const optionCount = {};\r\n\r\n  // 用户选择 A, B, C\r\n  // 对应 result：I, I, J\r\n  // optionCount[I] = 2; optionCount[J] = 1\r\n\r\n  // 遍历题目列表\r\n  for (const question of questions) {\r\n    // 遍历答案列表\r\n    for (const answer of answerList) {\r\n      // 遍历题目中的选项\r\n      for (const option of question.options) {\r\n        // 如果答案和选项的key匹配\r\n        if (option.key === answer) {\r\n          // 获取选项的result属性\r\n          const result = option.result;\r\n\r\n          // 如果result属性不在optionCount中，初始化为0\r\n          if (!optionCount[result]) {\r\n            optionCount[result] = 0;\r\n          }\r\n\r\n          // 在optionCount中增加计数\r\n          optionCount[result]++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 初始化最高分数和最高分数对应的评分结果\r\n  let maxScore = 0;\r\n  let maxScoreResult = question_results[0];\r\n\r\n  // 遍历评分结果列表\r\n  for (const result of question_results) {\r\n    // 计算当前评分结果的分数\r\n    const score = result.resultProp.reduce((count, prop) => {\r\n      return count + (optionCount[prop] || 0);\r\n    }, 0);\r\n\r\n    // 如果分数高于当前最高分数，更新最高分数和最高分数对应的评分结果\r\n    if (score > maxScore) {\r\n      maxScore = score;\r\n      maxScoreResult = result;\r\n    }\r\n  }\r\n\r\n  // 返回最高分数和最高分数对应的评分结果\r\n  return maxScoreResult;\r\n}\r\n\r\n// 示例数据\r\nconst answerList = [\"B\",\"B\",\"B\",\"A\"];\r\nconst questions = [\r\n  {\r\n    title: \"你通常更喜欢\",\r\n    options: [\r\n      {\r\n        result: \"I\",\r\n        value: \"独自工作\",\r\n        key: \"A\",\r\n      },\r\n      {\r\n        result: \"E\",\r\n        value: \"与他人合作\",\r\n        key: \"B\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    options: [\r\n      {\r\n        result: \"S\",\r\n        value: \"喜欢有结构和常规\",\r\n        key: \"A\",\r\n      },\r\n      {\r\n        result: \"N\",\r\n        value: \"喜欢自由和灵活性\",\r\n        key: \"B\",\r\n      },\r\n    ],\r\n    title: \"对于日常安排\",\r\n  },\r\n  {\r\n    options: [\r\n      {\r\n        result: \"P\",\r\n        value: \"首先考虑可能性\",\r\n        key: \"A\",\r\n      },\r\n      {\r\n        result: \"J\",\r\n        value: \"首先考虑后果\",\r\n        key: \"B\",\r\n      },\r\n    ],\r\n    title: \"当遇到问题时\",\r\n  },\r\n  {\r\n    options: [\r\n      {\r\n        result: \"T\",\r\n        value: \"时间是一种宝贵的资源\",\r\n        key: \"A\",\r\n      },\r\n      {\r\n        result: \"F\",\r\n        value: \"时间是相对灵活的概念\",\r\n        key: \"B\",\r\n      },\r\n    ],\r\n    title: \"你如何看待时间\",\r\n  },\r\n];\r\nconst question_results = [\r\n  {\r\n    resultProp: [\"I\", \"S\", \"T\", \"J\"],\r\n    resultDesc: \"忠诚可靠，被公认为务实，注重细节。\",\r\n    resultPicture: \"icon_url_istj\",\r\n    resultName: \"ISTJ（物流师）\",\r\n  },\r\n  {\r\n    resultProp: [\"I\", \"S\", \"F\", \"J\"],\r\n    resultDesc: \"善良贴心，以同情心和责任为特点。\",\r\n    resultPicture: \"icon_url_isfj\",\r\n    resultName: \"ISFJ（守护者）\",\r\n  },\r\n];\r\n\r\nconsole.log(getBestQuestionResult(answerList, questions, question_results));\r\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}"],"names":[],"sourceRoot":""}